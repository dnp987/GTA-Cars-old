<!DOCTYPE html>
<!-- Use with cars_db_test1.js -->
<html>
<head>
<meta charset="ISO-8859-1">
<title>Form test3</title>
 <link rel="stylesheet" type ="text/css" href="../css/cars-style.css">
</head>
<body>
	<h1>Cars form test3</h1>
	<form enctype="multipart/form-data" name = "form1"  method = "post"  accept-charset="utf-8">
		<label for="low">Low price</label>
		<input type ="text" id="low" name="low">
		<label for="high">High price</label>
		<input type ="text" id="high" name="high"><br><br>
		<input type = "submit" value="Submit" />
	</form>
<div></div>	
<div id = "box1"></div>
<div id = "box2"></div>
<div id = "box3"></div>

<script>
	var car_form = document.forms.namedItem("form1");
	car_form.addEventListener('submit', function(ev) {
	var oOutput = document.querySelector("div");
  	var oReq = new XMLHttpRequest();
  	oReq.open("POST", "http://localhost:5000/action1", true);
	oReq.setRequestHeader('Access-Control-Allow-Headers', '*');
	oReq.setRequestHeader('Content-type', 'multipart/form-data');
	oReq.setRequestHeader('Access-Control-Allow-Origin', '*');
  	oReq.onload = function(oEvent) {
    	if (oReq.status == 200) {
      	oOutput.innerHTML = "Uploaded!";
    	} else {
      		oOutput.innerHTML = "Error " + oReq.status + " occurred when trying to upload your file.<br \/>";
    	}
  	};

 	oReq.send(car_form);
  	ev.preventDefault();
	}, false);
</script>
</body>
</html>